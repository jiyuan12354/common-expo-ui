import React from 'react';
import { View, TouchableOpacity, Text, ViewStyle } from 'react-native';
import { pruTestID } from 'common_services_frontend';
import { PruPalette, PruIconFont } from 'common_ui_components';
import * as styles from './radio.style';

interface Option {
  key?: string;
  label: string;
  value: any;
}

interface Props {
  name: string;
  data: Option;
  options: Option[];
  onSelect: (name: string, options: Option) => void;
}

export const RadioComponent: React.FC<Props> = ({
  name = '',
  data = { value: '', label: '' },
  options = [],
  onSelect,
}) => {
  return (
    <View>
      {options.map((option: Option, index: number) => {
        // default style
        let color = PruPalette.greyba;
        let iconName = 'radio';
        let wrapStyle: ViewStyle[] = [styles.lineBox];

        // selected style
        if (data?.value === option?.value) {
          color = PruPalette.red;
          iconName = 'radio1';
          // add grey bg for selected item
          wrapStyle = [styles.lineBox, { backgroundColor: PruPalette.greyf4 }];
        }
        return (
          <TouchableOpacity
            key={index}
            style={wrapStyle}
            accessible={false}
            activeOpacity={0.9}
            onPress={() => {
              onSelect(name, option);
            }}>
            <PruIconFont size={18} color={color} name={iconName} />
            <Text {...pruTestID(option.key)} style={styles.itemText}>
              {option.label}
            </Text>
          </TouchableOpacity>
        );
      })}
    </View>
  );
};
