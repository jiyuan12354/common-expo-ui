import React, { FC } from 'react';
import {
  TouchableOpacity,
  Text,
  Image,
  ViewProps,
  StyleProp,
  ImageStyle,
  TextStyle,
} from 'react-native';
import { getImages } from '../../assets';
import { Colors, Fonts } from '../../style';
import { pruTestID } from 'common_services_frontend';

export type IconTextButtonPayload = {
  onPress?: () => void;
  icon: number;
  iconColor?: string;
  iconStyle?: StyleProp<ImageStyle>;
  buttonColor?: string;
  iconSize?: number;
  borderRadius?: number;
  borderWidth?: number;
  borderColors?: string;
  text: string;
  textStyle?: StyleProp<TextStyle>;
};
type IconTextButtonProps = ViewProps & {
  payload: IconTextButtonPayload;
};

export const IconTextButton: FC<IconTextButtonProps> = ({ payload, ...props }) => {
  const {
    onPress,
    icon,
    iconColor,
    iconStyle,
    iconSize,
    borderRadius,
    borderWidth,
    borderColors,
    buttonColor,
    text,
    textStyle,
  } = payload;

  const { style } = props;
  const defaultIconSize = 28;
  const defaultRadius = 0;
  const defaultBorderWidth = 0;
  return (
    <TouchableOpacity
      accessible={false}
      style={[
        {
          backgroundColor: buttonColor,
          alignItems: 'center',
          justifyContent: 'center',
          borderRadius: borderRadius || defaultRadius,
          borderWidth: borderWidth || defaultBorderWidth,
          borderColor: borderColors,
        },
        style,
      ]}
      onPress={onPress}>
      <Image
        source={icon || getImages.tick}
        style={[
          {
            width: iconSize || defaultIconSize,
            height: iconSize || defaultIconSize,
            tintColor: iconColor,
          },
          iconStyle || {},
        ]}
      />
      <Text
        {...pruTestID('IconTextButton')}
        style={[
          {
            marginTop: 4,
          },
          textStyle || {
            ...(Fonts.label.font14Bold as object),
            color: Colors.dark33,
          },
        ]}>
        {text}
      </Text>
    </TouchableOpacity>
  );
};
